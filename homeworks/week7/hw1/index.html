
<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8">

  <title>新拖延運動報名表單</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css" />
  <link rel="stylesheet" href="style.css">


</head>

<body>
  <div class="wrapper">
    <form>
      <h1 class="form__title">新拖延運動報名表單</h1>
      <p class="form__desc">活動日期：2020/12/10 ~ 2020/12/11<br>
        活動地點：台北市大安區新生南路二段1號</p>
      <p class="must">*必填</p>

      <div class="question required">
        <div class="question-title">暱稱</div>
        <div class="question__input">
          <input class="input_text" name="nickname" type="text" style="color:#afafaf;font-size: 16px;">
        </div>
        <div class="hide">寫暱稱啦！</div>
      </div> 

      <div class="question required">
        <div class="question-title">電子郵件</div>
        <div class="question__input">
          <input class="input_text" name="email" type="text" style="color:#afafaf;font-size: 16px;">
        </div>
        <div class="hide">寫電子郵件啦！</div>
      </div> 

      <div class="question required">
        <div class="question-title">手機號碼</div>
        <div class="question__input">
          <input class="input_text" name="phone" type="text" style="color:#afafaf;font-size: 16px;">
        </div>
        <div class="hide">寫手機號碼啦！</div>
      </div> 

      <div class="question required">
        <div class="question-title">報名類型</div>
        <div class="question__input">
          <label>
            <input name="type" value="1" type="radio"> 躺在床上用想像力實作</input><br>
          </label>
          
          <label>
            <input name="type" value="2" type="radio">  趴在地上滑手機找現成的</input>
          </label>
        </div>
        <div class="hide">填一下你要報名什麼好不好！</div>
      </div>

      <div class="question required">
        <div class="question-title">怎麼知道這個活動的？</div>
        <div class="question__input">
          <input class="input_text" name="howToKnow" type="text" style="color:#afafaf;font-size: 16px;">
        </div>
        <div class="hide">你不寫我怎麼知道你怎麼知道這個活動的？</div>
      </div> 

      <div class="question">
        <div class="question-title">其他</div>
        <p class="form__message">對活動的一些建議</p>
        <div class="question__input">
          <input class="input_text" name="others" type="text" style="color:#afafaf;font-size: 16px;">
        </div>
      </div>
      <input class="submit" type="submit" />
      <p class="form__desc">請勿透過表單送出您的密碼。</p>

    </form>
  </div>
  <footer>© 2020 © Copyright. All rights Reserved.</footer>
</body>
<script>
  document.querySelector('form').addEventListener('submit',
    function(e) {
      e.preventDefault();

      let isNotEmpty = true;
      let values = {};
      const required = document.querySelectorAll('.required');
      
  
      for(let i = 0; i < required.length; i += 1) {
        const inputText = required[i].querySelector('input[type=text]');
        const inputRadio = required[i].querySelectorAll('input[type=radio]')


        if(inputText) {
          values[inputText.name] = inputText.value;

          if(!inputText.value) {
            isNotEmpty = false;
            required[i].querySelector('.hide').style.visibility="visible";
          }
        } else if (inputRadio) {
          if([...inputRadio].every(element => element.checked === false)){
            isNotEmpty = false;
            required[i].querySelector('.hide').style.visibility="visible";
          } else {
            //:checked 偽元素
            let r = required[i].querySelector("input[type=radio]:checked");
            values[inputRadio[0].name] = r.parentNode.innerText;
          }
        }
      }
      
      if(isNotEmpty) {
        values["other"] = document.querySelector("input[name=others]").value;
        const completeStr = 
        `
        暱稱：${values.nickname}
        電子郵件：${values.email}
        手機號碼：${values.phone}
        報名類型：${values.type}
        怎麼知道這個活動的？：${values.howToKnow}
        其他：${values.other}
        `;
        alert(completeStr);
      }
    }
  );
  

</script>
</html>